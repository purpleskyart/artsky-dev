const t="app.artsky.artboard";function e(t,e){return{id:t,name:e.name??"Untitled",posts:Array.isArray(e.posts)?e.posts:[],createdAt:e.createdAt??(new Date).toISOString()}}function o(t){return{name:t.name,posts:t.posts.map(t=>({uri:t.uri,cid:t.cid,authorHandle:t.authorHandle,text:t.text?.slice(0,2e3),thumb:t.thumb,thumbs:t.thumbs})),createdAt:t.createdAt}}async function r(o,r){const a=await o.com.atproto.repo.listRecords({repo:r,collection:t,limit:100}),n=[];for(const t of a.data.records){const o=t.uri.split("/").pop()??t.uri,r=t.value;n.push(e(o,r))}return n.sort((t,e)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),n}async function a(o,r,a,n){const c=n??`artboard-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,i={name:a.trim()||"Untitled",posts:[],createdAt:(new Date).toISOString()};return await o.com.atproto.repo.putRecord({repo:r,collection:t,rkey:c,record:i,validate:!1}),e(c,i)}async function n(e,r,a){await e.com.atproto.repo.putRecord({repo:r,collection:t,rkey:a.id,record:o(a),validate:!1})}async function c(e,o,r){await e.com.atproto.repo.deleteRecord({repo:o,collection:t,rkey:r})}export{a as c,c as d,r as l,n as p};
