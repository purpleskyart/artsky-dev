import{ai as e}from"./index-CkOm7niF.js";import"./react-vendor-DGaPsC2e.js";import"./atproto-3-1TCh3S.js";function t(t={}){const{immediate:i=!1,onNeedRefresh:r,onOfflineReady:n,onRegistered:o,onRegisteredSW:s,onRegisterError:a}=t;let d,c,p;return c=async function(){if("serviceWorker"in navigator){if(d=await e(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-CLYUWRvB.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/artsky-dev/sw.js",{scope:"/artsky-dev/",type:"classic"})).catch(e=>{a?.(e)}),!d)return;p=()=>{d?.messageSkipWaiting()};{let e=!1;const t=()=>{e=!0,d?.addEventListener("controlling",e=>{e.isUpdate&&window.location.reload()}),r?.()};d.addEventListener("installed",i=>{void 0===i.isUpdate?void 0!==i.isExternal&&i.isExternal?t():!e&&n?.():i.isUpdate||n?.()}),d.addEventListener("waiting",t)}d.register({immediate:i}).then(e=>{s?s("/artsky-dev/sw.js",e):o?.(e)}).catch(e=>{a?.(e)})}}(),async(e=!0)=>{await c,p?.()}}export{t as registerSW};
