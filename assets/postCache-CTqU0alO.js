const t=new Map,e=new Map,n=new Map;function o(t,e){n.set(t,e)}function a(t){const e=n.get(t);return n.delete(t),e??null}function l(e){const n=t.get(e);return n?Date.now()-n.at>3e5?(t.delete(e),null):n.data:null}function r(e,n){if(t.set(e,{data:n,at:Date.now()}),t.size>200){const e=[...t.entries()].sort((t,e)=>t[1].at-e[1].at),n=Math.floor(t.size/4);for(let o=0;o<n&&o<e.length;o++)t.delete(e[o][0])}}function s(t,n){const o=e.get(t);if(o)return o;const a=n().then(n=>(e.delete(t),n));return e.set(t,a),a}export{s as dedupeFetch,l as getCachedThread,r as setCachedThread,o as setInitialPostForUri,a as takeInitialPostForUri};
